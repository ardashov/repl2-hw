# Домашнее задание к занятию "Репликация и масштабирование. Часть 2" - Ардашов Владимир

---

### Задание 1
Опишите основные преимущества использования масштабирования методами:

 - активный master-сервер и пассивный репликационный slave-сервер;
 - master-сервер и несколько slave-серверов;

Дайте ответ в свободной форме.

Активный master-сервер и пассивный репликационный slave-сервер:

Этот метод подразумевает наличие двух серверов: активного мастера, выполняющего основную нагрузку, и пассивного слэйва, работающего в режиме ожидания. Основные преимущества такого подхода включают:

 - Отказоустойчивость: Если основной сервер выходит из строя, резервный сервер автоматически берет на себя обработку запросов, обеспечивая непрерывность обслуживания пользователей.
 - Простота реализации: Данная схема относительно проста в настройке и управлении, особенно для небольших проектов или начальных этапов роста нагрузки.
 - Минимальные затраты: Использование всего двух серверов снижает расходы на инфраструктуру и техническое обслуживание.

master-сервер и несколько slave-серверов:

Здесь используется конфигурация с одним активным мастером и множеством пассивных слэйвов, каждый из которых получает обновления данных с основного сервера:

 - Распределение нагрузки чтения: Запросы на чтение данных распределяются между несколькими слэйвами, снижая нагрузку на мастер-сервер и улучшая общую производительность системы.
 - Масштабируемость: Возможность добавления новых слэйв-серверов позволяет легко увеличивать емкость системы по мере роста числа пользователей или объема данных.
 - Повышенная отказоустойчивость: Даже если один из слэйв-серверов становится недоступным, остальные продолжают обслуживать запросы, минимизируя влияние сбоев на доступность сервиса.
 - Оптимизация затрат: Хотя стоимость инфраструктуры увеличивается по сравнению с первым методом, данная архитектура часто оказывается экономически эффективной благодаря улучшению производительности и надежности.

---

### Задание 2
Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц:

 - пользователи,
 - книги,
 - магазины (столбцы произвольно).

Опишите принципы построения системы и их разграничение или разбивку между базами данных.

Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.

Структура БД
Три таблицы:

 - users (id, name, email, address)

 - books (id, title, author, genre)

 - stores (id, name, address, city)

Вертикальный шардинг — каждая таблица размещается на отдельном сервере/кластере.

Горизонтальный шардинг — данные разбиваются на части (шарды) по определённому критерию (например, по ID), каждый шард хранится на отдельном сервере.

1. Вертикальный шардинг.

Каждый тип данных размещается на выделенном сервере:

 - сервер 1: таблица users (профиль пользователя, аутентификация)

 - сервер 2: таблица books (каталог книг, метаданные)

 - сервер 3: таблица stores (информация о магазинах, локации)

2. Горизонтальный шардинг.

Для каждой таблицы определяем ключ шардинга:

 - users: шардинг по id (диапазоны: 1–100 000, 100 001–200 000 и т. д.)

 - books: шардинг по genre (фантастика, детективы, учебная литература и т. д.)

 - stores: шардинг по city

Каждый шард размещается на отдельном сервере или в кластере.

Пример для users:

 - щард 1 (id 1–100 000): сервер 1A

 - шард 2 (id 100 001–200 000): сервер 2А

Режимы работы серверов

Основной (read‑write):

 - принимает запросы на чтение и запись

 - ведёт репликацию на slave‑серверы

 - используется для транзакционных операций (регистрация пользователя, покупка книги).

Реплика (read‑only):

 - синхронизируется с основным сервером

 - обслуживает запросы на чтение (поиск книг, просмотр профиля)

 - повышает отказоустойчивость и масштабирует чтение

---
